# Redis 하습
Redis 학습

Table of contents
=================
<!--ts-->
   * [Redis](#Redis)
   * [Redis 값 자료구조](#Redis-값-자료구조)
   * [Redis 백업](#Redis-백업)
   * [Redis 아키텍처](#Redis-아키텍처)
<!--te-->

Redis
=======
* Redis
  * Key Value 형태로 데이터를 저장하는 오픈소스 소프트웨어
  * 메모리 기반으로 동작
  * 싱글 스레드도 동작하기에 순차적인 처리로 인해 데이터의 일관성을 유지할 수 있음
  * 분산락을 제공하여 원자적인 연산 가능
  * 영속성을 제공하여 스냅샷이나 AOP 기능으로 데이터 백업 가능

Redis 값 자료구조
=======
* String
  * 일반적인 String 값
  * INCRBY, DECRBY는 데이터가 정수형인 경우에 대해서 유효하게 동작 가능
  * GET: 키에 대한하는 값을 가져옴
  * SET: 문자열 데이터를 저장하는 방법, 이진 데이터도 포함되기 떄문에 이미지도 저장 가능
  * SETNX: 키가 존재하지 않는 경우에 대해서만 문자열 데이터를 저장하는 방법, 일반적인 SET에 비해 성능 차이가 조금 더 우수함
  * MSET: 문자열 Bulk Write 방법, 네트워크 IO를 줄여주기 때문에 성능적으로 우수
  * DEL: 키를 삭제
* List
  * 일반적인 Linked List 형태의 값
  * PUSH: 데이터를 추가
  * POP: 데이터를 삭제
  * LPUSH: 키에 해당하는 리스트의 헤드에 데이터를 추가
  * LPOP: 키에 해당하는 리스트의 헤드에 데이터를 삭제
  * RPUSH: 키에 해당하는 리스트의 마지막 데이터를 추가
  * RPOP: 키에 해당하는 리스트의 마지막 데이터를 삭제
  * LINDEX: 키에 해당하는 리스트의 인덱스 요소를 반환
  * LLEN: 키에 해당하는 리스트의 길이를 반환
  * LSET: 키에 해당하는 리스트의 인덱스의 값을 변경
* Set
  * 키에 대한 여러 개의 값를 고유하게 저장 하는 값으로 확인을 하는 용도로 사용
  * SADD: 키에 해당하는 집합에 새로운 멤버를 추가
  * SREM: 키에 해당하는 집합에서 멤버를 제거
  * SCARD: 키에 해당하는 집합의 맴버의 갯수를 반환
  * SINTER: 키에 해당하는 집합들의 교집합을 반환
  * SUNION: 키에 해당하는 집합들의 합집합을 반환
  * SDIFF: 키에 해당하는 집합들의 차집합을 반환
* Sorted Set
  * 키에 대한 여러 개의 값을 점수와 함께 저장하여 정렬된 형태로 저장하는 값으로 랭킹 용도로 사용
  * ZADD: 키에 해당하는 집합의 점수와 값을 추가
  * ZCARD: 키에 해당하는 집합의 멤버의 개수를 반환
  * ZSCORE: 키에 해당하는 집합의 특정 멤버의 점수를 반환
  * ZRANGE: 키에 해당하는 집합의 인덱스 범위에 대한하는 멤버를 조회
* Hashes
  * 키에 대해서 필드-값 쌍을 저장하는 해시 맵 형태의 값
  * 키는 RDB의 PK, 필드는 RDB의 칼럼, 값은 RDB의 로우 역할을 수행시켜 RDB와 유사한 형태로 데이터를 저장이 가능
  * HINCRBY, HDECRBY는 데이터가 정수형인 경우에 대해서 유효하게 동작 가능
  * HSET: 키에 해당하는 해시 맵에 하나 이상의 필드와 값을 설정
  * HSETNX: 키가 존재하지 않는 경우에 대해서만 키에 해당하는 해시 맵에 하나 이상의 필드와 값을 설정
  * MHSET: 해시 맵을 Bulk Write 방법, 네트워크 IO를 줄여주기 때문에 성능적으로 우수
  * HGET: 키에 해당하는 해시 맵에 지정한 필드의 값을 반환
  * HDEL: 키에 해당하는 해시 맵에 하나 이상의 필드를 제거
  * HEXISTS: 키에 해당하는 해시 맵에 특정 필드가 존재하는지 확인
* BitMaps
  * 키에 대해서 Bit Map 배열 형태의 값으로 유저 목록을 저장하고 읽는 용도로 사용

Redis 백업 방법
=======
* RDB
  * 특정한 시점의 바이너리 데이터 형태의 단일 파일로 스냅샷으로 백업하는 방식
  * 유실되도 괜찮은 캐시인 경우에 사용되는 방식
  * 스냅샷 시점에 Redis가 다운되면 이전 스냅샷 시점까지만 백업이 사라질 수 있음
  * 빠르고 효율적임
* AOF
  * Redis의 기본 백업 방법
  * 모든 쓰기 명령에 대한 로그를 남기는 방식
  * 인 메모리 디비로 사용할 때 유실이 되면 안되므로 사용되는 방식
  * 리소스가 RDB에 비해 조금 더 소요

Redis 아키텍처
=======
![Image](https://github.com/user-attachments/assets/f9f16953-27da-4389-b21e-815190e4b39f)
* Replication 아키텍처
  * Master와 Slave 구조의 단순한 복제 시 사용
  * HA 기능은 없으므로 수동으로 복구해야함
* Sentinel 아키텍처
  * Sentinel, Master, Replica로 구성
  * 레디스 센티넬은 레디스 서버들(Master, Replica)을 관리
  * HA 기능이 있어 Master가 비정상 상태일 때 자동으로 Failover
  * 샤딩 기능은 없음
* Cluster 아키텍처
  * 레디스 클러스터는 클러스터에 포함된 노드들이 서로 통신하면서 HA를 유지
  * 클러스터 내부의 모든 노드는 모두 서로 연결되어 있는 메시(Mesh) 구조로 되어 있으며 가십 프로토콜을 사용하여 서로 모니터링
  * 샤딩을 기본 기능으로 사용 가능
